<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Portfolio Details - iPortfolio Bootstrap Template</title>
  <meta content="" name="descriptison">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/icofont/icofont.min.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/venobox/venobox.css" rel="stylesheet">
  <link href="assets/vendor/owl.carousel/assets/owl.carousel.min.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: iPortfolio - v1.2.1
  * Template URL: https://bootstrapmade.com/iportfolio-bootstrap-portfolio-websites-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

  <!-- ======= Mobile nav toggle button ======= -->
  <button type="button" class="mobile-nav-toggle d-xl-none"><i class="icofont-navigation-menu"></i></button>

  <!-- ======= Header ======= -->
  <header id="header">
    <div class="d-flex flex-column">

      <div class="profile">
        <img src="assets/img/profile-img.jpg" alt="" class="img-fluid rounded-circle">
        <h1 class="text-light"><a href="index.html">Richard Chen</a></h1>
        <div class="social-links mt-3 text-center">
          <a href="https://www.youtube.com/channel/UCXCgxPLZV8QcKN8JP0pJmHQ" class="youtube"><i class="bx bxl-youtube"></i></a>
          <a href="https://www.facebook.com/richard.p.chen1/" class="facebook"><i class="bx bxl-facebook"></i></a>
          <a href="https://www.instagram.com/not_richardchen/" class="instagram"><i class="bx bxl-instagram"></i></a>
          <a href="https://www.linkedin.com/in/richardchen169/" class="linkedin"><i class="bx bxl-linkedin"></i></a>
        </div>
      </div>

      <nav class="nav-menu">
        <ul>
          <li class="active"><a href="index.html"><i class="bx bx-home"></i> <span>Home</span></a></li>
          <li><a href="index.html#about"><i class="bx bx-user"></i> <span>About</span></a></li>
          <li><a href="index.html#portfolio"><i class="bx bx-book-content"></i>Projects</a></li>
          <li><a href="index.html#photographs"><i class="bx bx-book-content"></i>Photos</a></li>

        </ul>
      </nav><!-- .nav-menu -->
      <button type="button" class="mobile-nav-toggle d-xl-none"><i class="icofont-navigation-menu"></i></button>

    </div>
  </header><!-- End Header -->

  <main id="main">

    <!-- ======= Breadcrumbs ======= -->
    <section id="breadcrumbs" class="breadcrumbs">
      <div class="container">

        <div class="d-flex justify-content-between align-items-center">
          <h2>Colorizing Images of the Russian Empire</h2>
          <ol>
            <li><a href="index.html">Home</a></li>
            <li>Colorization</li>
          </ol>
        </div>

      </div>
    </section><!-- End Breadcrumbs -->

    <!-- ======= Portfolio Details Section ======= -->
<!--     <section id="portfolio-details" class="portfolio-details">
      <div class="container">

        <div class="portfolio-details-container">

          <div class="owl-carousel portfolio-details-carousel">
            <img src="assets/img/portfolio-details-1.jpg" class="img-fluid" alt="">
            <img src="assets/img/portfolio-details-2.jpg" class="img-fluid" alt="">
            <img src="assets/img/portfolio-details-3.jpg" class="img-fluid" alt="">
          </div>

          <div class="portfolio-info">
            <h3>Project information</h3>
            <ul>
              <li><strong>Category</strong>: Web design</li>
              <li><strong>Client</strong>: ASU Company</li>
              <li><strong>Project date</strong>: 01 March, 2020</li>
              <li><strong>Project URL</strong>: <a href="#">www.example.com</a></li>
            </ul>
          </div>

        </div>

        <div class="portfolio-description">
          <h2>This is an example of portfolio detail</h2>
          <p>
            Autem ipsum nam porro corporis rerum. Quis eos dolorem eos itaque inventore commodi labore quia quia. Exercitationem repudiandae officiis neque suscipit non officia eaque itaque enim. Voluptatem officia accusantium nesciunt est omnis tempora consectetur dignissimos. Sequi nulla at esse enim cum deserunt eius.
          </p>
        </div>

      </div>
    </section> --><!-- End Portfolio Details Section -->


    <!--Begin Portfolio Details Section -->
    <div class = "container">
  <h1>Introduction</h1>

  <p>
    Sergei Mikhailovich Prokudin-Gorskii (1863-1944) traveled across the Russian Empire and took color photographs everywhere. However his concept of color photography wasn't the same as ours today. His idea was to record three exposures of every scene onto a glass plate using a red, a green, and a blue filter. However because they were captured separately, the images are slightly misaligned from each other. The goal of this project is to take these digitized RGB negatives and to automatically produce a color image with as few visual artifacts as possible.
  </p>
  <img src="assets/img/portfolio/self_portrait.jpg" style="width:50%" class="center">  <figcaption class="caption_text"><i>Colorized self portrait of Sergei Mikhailovich Prokudin-Gorskii</i></figcaption>

  <h2>Approach</h2>
  <p>I first implemented a brute force algorithm which was satisfactory for small images. I found the displacements of the green and red plates in relation to the blue plate by searching from a range of [-15,15) pixel shifts in both the x and y directions. I evaluated these shifts using a normalized cross correlation. The higher the normalized cross correlation is between two images, the more "similar" they should be to each other. I then shift the images accordingly and overlay them on top of each other. Some results are shown below.</p>
  <br>

<div id="smallColors" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
    <li data-target="#smallColors" data-slide-to="0" class="active"></li>
    <li data-target="#smallColors" data-slide-to="1"></li>
    <li data-target="#smallColors" data-slide-to="2"></li>
  </ol>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img class="d-block w-100"  src="assets/img/portfolio/colorization/tobolsk.jpg" alt="">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="assets/img/portfolio/colorization/monastery.jpg" alt="">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="assets/img/portfolio/colorization/cathedral.jpg"  alt="">
    </div>

  </div>
  <a class="carousel-control-prev" href="#smallColors" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#smallColors" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>

<br>



  
  <p>This aproach works fairly well when images are not that big and scanning between a [-15,15) range is satisfactory. However the performance drops when the images are a lot bigger. To fix this, I implemented an image pyramid. I start with downscaled versions of the r,g,b channels and gradually work my way up to the pictures full resolution.</p>
  <br>
  <h3>Image Pyramid</h3>
  <p>For the large images, I downscale each axis by a factor of 64 each. Then I found the pixel shift from these downscaled versions searching a range of [-3,3] in both x and y. When I found this value, I would store this information (keeping in mind that this was for a downscaled version). I would then shift the image according to my value, and recursively call the alignment method, except this time with a downscale factor of 32 from the original instead of 64. Every recursive call gets more and more precise to the true pixel shift, until I reach the full resolution. Some results of this method are shown below.</p>

<br>
<div id="bigColors" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
    <li data-target="#bigColors" data-slide-to="0" class="active"></li>
    <li data-target="#bigColors" data-slide-to="1"></li>
    <li data-target="#bigColors" data-slide-to="2"></li>
    <li data-target="#bigColors" data-slide-to="3"></li>
    <li data-target="#bigColors" data-slide-to="4"></li>
    <li data-target="#bigColors" data-slide-to="5"></li>
    <li data-target="#bigColors" data-slide-to="6"></li>
    <li data-target="#bigColors" data-slide-to="7"></li>
    <li data-target="#bigColors" data-slide-to="8"></li>
    <li data-target="#bigColors" data-slide-to="9"></li>
    <li data-target="#bigColors" data-slide-to="10"></li>
    <li data-target="#bigColors" data-slide-to="11"></li>
    <li data-target="#bigColors" data-slide-to="12"></li>
  </ol>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img class="d-block w-100"  src="assets/img/portfolio/colorization/board.jpg" alt="">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="assets/img/portfolio/colorization/door.jpg" alt="">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="assets/img/portfolio/colorization/harvesters.jpg"  alt="">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="assets/img/portfolio/colorization/icon.jpg"  alt="">
    </div>
    <div class="carousel-item">  <img class="d-block w-100" src="assets/img/portfolio/colorization/lady.jpg" class="img-fluid" alt=""></div>
    <div class="carousel-item">  <img class="d-block w-100" src="assets/img/portfolio/colorization/lake.jpg" class="img-fluid" alt=""></div>
    <div class="carousel-item">  <img class="d-block w-100" src="assets/img/portfolio/colorization/melons.jpg" class="img-fluid" alt=""></div>
    <div class="carousel-item">  <img class="d-block w-100" src="assets/img/portfolio/colorization/onion_church.jpg" class="img-fluid" alt=""></div>
    <div class="carousel-item">  <img class="d-block w-100" src="assets/img/portfolio/colorization/shed.jpg" class="img-fluid" alt=""></div>
    <div class="carousel-item">  <img class="d-block w-100" src="assets/img/portfolio/colorization/three_generations.jpg" class="img-fluid" alt=""></div>
    <div class="carousel-item">  <img class="d-block w-100" src="assets/img/portfolio/colorization/train.jpg" class="img-fluid" alt=""></div>
    <div class="carousel-item">  <img class="d-block w-100" src="assets/img/portfolio/colorization/village.jpg" class="img-fluid" alt=""></div>
    <div class="carousel-item">  <img class="d-block w-100" src="assets/img/portfolio/colorization/workshop.jpg" class="img-fluid" alt=""></div>

  </div>
  <a class="carousel-control-prev" href="#bigColors" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#bigColors" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>
<br>


  <p>There are some problems with this method. In particular, I had trouble with this image of the emir.</p>
  <img src="assets/img/portfolio/colorization/emir.jpg" style="width:50%" class="center">
  <p>It seems the problem is the patterns on his clothes. Because there are so many similar patterns, the alignment method gets confused and gives incorrect values. The results improved slightly when I cropped different amounts of the image, but there was no real insight to playing with these margins, so I didn't try to play that game. Most likely to get a clear image, I would need to implement some sort of edge detection. Shaving off 5% from every margin seemed to give decent performance on all other pictures though.</p>

  <br>
  <br>
  <h3>Automatic Cropping</h3>
  <p>I attempted automatic croping by noting how the np.roll function behaves when I shifted the r,g, and b channels. Let's say I found the pixel shift of the red channel from the blue channel to be 10 pixels in the y direction and 7 pixels in the x direction. When I shifted red channel using np.roll, it would take the last 10 pixels in the y direction and send it to the very beginning of the picture, and similarly for the x direction. These "overflowed" pixels would obviously create unpleasant artifacts around the borders. To address this, I looked at both the red and green channel and chose the maximum values where I shifted these channels in relation to the blue channel. Then I cropped the images in accordance to how much I shifted the images. The results seemed to work decently. </p>

<br>
<div id="cropColors" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
    <li data-target="#cropColors" data-slide-to="0" class="active"></li>
    <li data-target="#cropColors" data-slide-to="1"></li>
    <li data-target="#cropColors" data-slide-to="2"></li>
    <li data-target="#cropColors" data-slide-to="3"></li>
    <li data-target="#cropColors" data-slide-to="4"></li>
    <li data-target="#cropColors" data-slide-to="5"></li>
    <li data-target="#cropColors" data-slide-to="6"></li>
    <li data-target="#cropColors" data-slide-to="7"></li>
    <li data-target="#cropColors" data-slide-to="8"></li>
    <li data-target="#cropColors" data-slide-to="9"></li>
    <li data-target="#cropColors" data-slide-to="10"></li>
    <li data-target="#cropColors" data-slide-to="11"></li>
  </ol>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img class="d-block w-100"  src="assets/img/portfolio/colorization/no_crop/board.jpg" alt="">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="assets/img/portfolio/colorization/board.jpg" alt="">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="assets/img/portfolio/colorization/no_crop/door.jpg"  alt="">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="assets/img/portfolio/colorization/door.jpg"  alt="">
    </div>
    <div class="carousel-item">  <img class="d-block w-100" src="assets/img/portfolio/colorization/no_crop/harvesters.jpg" class="img-fluid" alt=""></div>
    <div class="carousel-item">  <img class="d-block w-100" src="assets/img/portfolio/colorization/harvesters.jpg" class="img-fluid" alt=""></div>
    <div class="carousel-item">  <img class="d-block w-100" src="assets/img/portfolio/colorization/no_crop/icon.jpg" class="img-fluid" alt=""></div>
    <div class="carousel-item">  <img class="d-block w-100" src="assets/img/portfolio/colorization/icon.jpg" class="img-fluid" alt=""></div>
    <div class="carousel-item">  <img class="d-block w-100" src="assets/img/portfolio/colorization/no_crop/lady.jpg" class="img-fluid" alt=""></div>
    <div class="carousel-item">  <img class="d-block w-100" src="assets/img/portfolio/colorization/lady.jpg" class="img-fluid" alt=""></div>
    <div class="carousel-item">  <img class="d-block w-100" src="assets/img/portfolio/colorization/no_crop/workshop.jpg" class="img-fluid" alt=""></div>
    <div class="carousel-item">  <img class="d-block w-100" src="assets/img/portfolio/colorization/workshop.jpg" class="img-fluid" alt=""></div>
  </div>
  <a class="carousel-control-prev" href="#cropColors" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#cropColors" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>

<br>

</div>
    <!-- End Portfolio Details Section -->
  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer">
    <div class="container">
      <div class="copyright">
      </div>
      <div class="credits">
        Made with Bootstrap
      </div>
    </div>
  </footer><!-- End  Footer -->

  <a href="#" class="back-to-top"><i class="icofont-simple-up"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/jquery/jquery.min.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/jquery.easing/jquery.easing.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/waypoints/jquery.waypoints.min.js"></script>
  <script src="assets/vendor/counterup/counterup.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/venobox/venobox.min.js"></script>
  <script src="assets/vendor/owl.carousel/owl.carousel.min.js"></script>
  <script src="assets/vendor/typed.js/typed.min.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>